var city = 'Hololulu';

var mslData = {
  metadata: {
    longitude: "21° 18.4' N",
    latitude: "157° 52' W",
    name: 'Honolulu'
  },
  data : [
    { "x": "1911", "y": 0.15591666666666668 },
    { "x": "1912", "y": 0.3294166666666667 },
    { "x": "1913", "y": 0.42475 },
    { "x": "1914", "y": 0.598 },
    { "x": "1915", "y": 0.6975833333333333 },
    { "x": "1916", "y": 0.5435000000000001 },
    { "x": "1917", "y": 0.4779166666666667 },
    { "x": "1918", "y": 0.33325000000000005 },
    { "x": "1919", "y": 0.5894166666666667 },
    { "x": "1920", "y": 0.8346666666666666 },
    { "x": "1921", "y": 0.6829166666666667 },
    { "x": "1922", "y": 0.5541666666666666 },
    { "x": "1923", "y": 0.5164166666666666 },
    { "x": "1924", "y": 0.44016666666666665 },
    { "x": "1925", "y": 0.5976666666666667 },
    { "x": "1926", "y": 0.5520833333333334 },
    { "x": "1927", "y": 0.4568333333333334 },
    { "x": "1928", "y": 0.3910833333333333 },
    { "x": "1929", "y": 0.439 },
    { "x": "1930", "y": 0.5523333333333333 },
    { "x": "1931", "y": 0.5936666666666667 },
    { "x": "1932", "y": 0.5778333333333333 },
    { "x": "1933", "y": 0.5335833333333334 },
    { "x": "1934", "y": 0.42050000000000004 },
    { "x": "1935", "y": 0.6006666666666666 },
    { "x": "1936", "y": 0.6176666666666667 },
    { "x": "1937", "y": 0.5134166666666667 },
    { "x": "1938", "y": 0.5416666666666666 },
    { "x": "1939", "y": 0.5428333333333334 },
    { "x": "1940", "y": 0.7940833333333334 },
    { "x": "1941", "y": 0.7015833333333333 },
    { "x": "1942", "y": 0.6909166666666667 },
    { "x": "1943", "y": 0.8619999999999998 },
    { "x": "1944", "y": 0.7266666666666667 },
    { "x": "1945", "y": 0.6176666666666667 },
    { "x": "1946", "y": 0.6735000000000001 },
    { "x": "1947", "y": 0.6676666666666667 },
    { "x": "1948", "y": 0.5773333333333334 },
    { "x": "1949", "y": 0.646 },
    { "x": "1950", "y": 0.6666666666666666 },
    { "x": "1951", "y": 0.6513333333333332 },
    { "x": "1952", "y": 0.68775 },
    { "x": "1953", "y": 0.6511666666666667 },
    { "x": "1954", "y": 0.6922499999999999 },
    { "x": "1955", "y": 0.4495833333333333 },
    { "x": "1956", "y": 0.5661666666666666 },
    { "x": "1957", "y": 0.643 },
    { "x": "1958", "y": 0.7444166666666666 },
    { "x": "1959", "y": 0.9261666666666667 },
    { "x": "1960", "y": 0.5910833333333333 },
    { "x": "1961", "y": 0.8155833333333332 },
    { "x": "1962", "y": 0.7944166666666668 },
    { "x": "1963", "y": 0.7854166666666665 },
    { "x": "1964", "y": 0.7185833333333332 },
    { "x": "1965", "y": 0.672 },
    { "x": "1966", "y": 0.7120000000000001 },
    { "x": "1967", "y": 0.6017500000000001 },
    { "x": "1968", "y": 0.7943333333333332 },
    { "x": "1969", "y": 0.8368333333333333 },
    { "x": "1970", "y": 0.6304166666666667 },
    { "x": "1971", "y": 0.6155 },
    { "x": "1972", "y": 0.6249166666666667 },
    { "x": "1973", "y": 0.7399166666666668 },
    { "x": "1974", "y": 0.9144166666666665 },
    { "x": "1975", "y": 0.6416666666666667 },
    { "x": "1976", "y": 0.7170000000000001 },
    { "x": "1977", "y": 0.7731666666666667 },
    { "x": "1978", "y": 0.8574166666666668 },
    { "x": "1979", "y": 0.7853333333333333 },
    { "x": "1980", "y": 0.9161666666666668 },
    { "x": "1981", "y": 1.0085 },
    { "x": "1982", "y": 0.729 },
    { "x": "1983", "y": 0.7714166666666666 },
    { "x": "1984", "y": 0.9234166666666667 },
    { "x": "1985", "y": 0.82875 },
    { "x": "1986", "y": 0.6245833333333334 },
    { "x": "1987", "y": 0.7153333333333333 },
    { "x": "1988", "y": 0.9951666666666666 },
    { "x": "1989", "y": 0.7875833333333334 },
    { "x": "1990", "y": 0.6258333333333334 },
    { "x": "1991", "y": 0.7716666666666666 },
    { "x": "1992", "y": 0.9079999999999999 },
    { "x": "1993", "y": 0.8491666666666666 },
    { "x": "1994", "y": 0.8265000000000001 },
    { "x": "1995", "y": 1.0315833333333333 },
    { "x": "1996", "y": 0.9725833333333335 },
    { "x": "1997", "y": 0.9231666666666669 },
    { "x": "1998", "y": 0.6931666666666668 },
    { "x": "1999", "y": 0.8602500000000001 },
    { "x": "2000", "y": 0.74975 },
    { "x": "2001", "y": 0.79975 },
    { "x": "2002", "y": 0.7815 },
    { "x": "2003", "y": 1.02075 },
    { "x": "2004", "y": 1.0218333333333334 },
    { "x": "2005", "y": 0.9218333333333333 },
    { "x": "2006", "y": 1.017 },
    { "x": "2007", "y": 0.8937500000000002 },
    { "x": "2008", "y": 0.9196666666666667 },
    { "x": "2009", "y": 0.7649166666666667 },
    { "x": "2010", "y": 0.8393333333333333 },
    { "x": "2011", "y": 0.8301666666666665 },
    { "x": "2012", "y": 0.8413333333333332 },
    { "x": "2013", "y": 0.8838333333333334 },
    { "x": "2014", "y": 0.9475833333333333 },
    { "x": "2015", "y": 0.9415833333333333 }]
  }
// var data = [
//   { "x": "1911", "y": 0.15591666666666668 },
//   { "x": "1912", "y": 0.3294166666666667 },
//   { "x": "1913", "y": 0.42475 },
//   { "x": "1914", "y": 0.598 },
//   { "x": "1915", "y": 0.6975833333333333 },
//   { "x": "1916", "y": 0.5435000000000001 },
//   { "x": "1917", "y": 0.4779166666666667 },
//   { "x": "1918", "y": 0.33325000000000005 },
//   { "x": "1919", "y": 0.5894166666666667 },
//   { "x": "1920", "y": 0.8346666666666666 },
//   { "x": "1921", "y": 0.6829166666666667 },
//   { "x": "1922", "y": 0.5541666666666666 },
//   { "x": "1923", "y": 0.5164166666666666 },
//   { "x": "1924", "y": 0.44016666666666665 },
//   { "x": "1925", "y": 0.5976666666666667 },
//   { "x": "1926", "y": 0.5520833333333334 },
//   { "x": "1927", "y": 0.4568333333333334 },
//   { "x": "1928", "y": 0.3910833333333333 },
//   { "x": "1929", "y": 0.439 },
//   { "x": "1930", "y": 0.5523333333333333 },
//   { "x": "1931", "y": 0.5936666666666667 },
//   { "x": "1932", "y": 0.5778333333333333 },
//   { "x": "1933", "y": 0.5335833333333334 },
//   { "x": "1934", "y": 0.42050000000000004 },
//   { "x": "1935", "y": 0.6006666666666666 },
//   { "x": "1936", "y": 0.6176666666666667 },
//   { "x": "1937", "y": 0.5134166666666667 },
//   { "x": "1938", "y": 0.5416666666666666 },
//   { "x": "1939", "y": 0.5428333333333334 },
//   { "x": "1940", "y": 0.7940833333333334 },
//   { "x": "1941", "y": 0.7015833333333333 },
//   { "x": "1942", "y": 0.6909166666666667 },
//   { "x": "1943", "y": 0.8619999999999998 },
//   { "x": "1944", "y": 0.7266666666666667 },
//   { "x": "1945", "y": 0.6176666666666667 },
//   { "x": "1946", "y": 0.6735000000000001 },
//   { "x": "1947", "y": 0.6676666666666667 },
//   { "x": "1948", "y": 0.5773333333333334 },
//   { "x": "1949", "y": 0.646 },
//   { "x": "1950", "y": 0.6666666666666666 },
//   { "x": "1951", "y": 0.6513333333333332 },
//   { "x": "1952", "y": 0.68775 },
//   { "x": "1953", "y": 0.6511666666666667 },
//   { "x": "1954", "y": 0.6922499999999999 },
//   { "x": "1955", "y": 0.4495833333333333 },
//   { "x": "1956", "y": 0.5661666666666666 },
//   { "x": "1957", "y": 0.643 },
//   { "x": "1958", "y": 0.7444166666666666 },
//   { "x": "1959", "y": 0.9261666666666667 },
//   { "x": "1960", "y": 0.5910833333333333 },
//   { "x": "1961", "y": 0.8155833333333332 },
//   { "x": "1962", "y": 0.7944166666666668 },
//   { "x": "1963", "y": 0.7854166666666665 },
//   { "x": "1964", "y": 0.7185833333333332 },
//   { "x": "1965", "y": 0.672 },
//   { "x": "1966", "y": 0.7120000000000001 },
//   { "x": "1967", "y": 0.6017500000000001 },
//   { "x": "1968", "y": 0.7943333333333332 },
//   { "x": "1969", "y": 0.8368333333333333 },
//   { "x": "1970", "y": 0.6304166666666667 },
//   { "x": "1971", "y": 0.6155 },
//   { "x": "1972", "y": 0.6249166666666667 },
//   { "x": "1973", "y": 0.7399166666666668 },
//   { "x": "1974", "y": 0.9144166666666665 },
//   { "x": "1975", "y": 0.6416666666666667 },
//   { "x": "1976", "y": 0.7170000000000001 },
//   { "x": "1977", "y": 0.7731666666666667 },
//   { "x": "1978", "y": 0.8574166666666668 },
//   { "x": "1979", "y": 0.7853333333333333 },
//   { "x": "1980", "y": 0.9161666666666668 },
//   { "x": "1981", "y": 1.0085 },
//   { "x": "1982", "y": 0.729 },
//   { "x": "1983", "y": 0.7714166666666666 },
//   { "x": "1984", "y": 0.9234166666666667 },
//   { "x": "1985", "y": 0.82875 },
//   { "x": "1986", "y": 0.6245833333333334 },
//   { "x": "1987", "y": 0.7153333333333333 },
//   { "x": "1988", "y": 0.9951666666666666 },
//   { "x": "1989", "y": 0.7875833333333334 },
//   { "x": "1990", "y": 0.6258333333333334 },
//   { "x": "1991", "y": 0.7716666666666666 },
//   { "x": "1992", "y": 0.9079999999999999 },
//   { "x": "1993", "y": 0.8491666666666666 },
//   { "x": "1994", "y": 0.8265000000000001 },
//   { "x": "1995", "y": 1.0315833333333333 },
//   { "x": "1996", "y": 0.9725833333333335 },
//   { "x": "1997", "y": 0.9231666666666669 },
//   { "x": "1998", "y": 0.6931666666666668 },
//   { "x": "1999", "y": 0.8602500000000001 },
//   { "x": "2000", "y": 0.74975 },
//   { "x": "2001", "y": 0.79975 },
//   { "x": "2002", "y": 0.7815 },
//   { "x": "2003", "y": 1.02075 },
//   { "x": "2004", "y": 1.0218333333333334 },
//   { "x": "2005", "y": 0.9218333333333333 },
//   { "x": "2006", "y": 1.017 },
//   { "x": "2007", "y": 0.8937500000000002 },
//   { "x": "2008", "y": 0.9196666666666667 },
//   { "x": "2009", "y": 0.7649166666666667 },
//   { "x": "2010", "y": 0.8393333333333333 },
//   { "x": "2011", "y": 0.8301666666666665 },
//   { "x": "2012", "y": 0.8413333333333332 },
//   { "x": "2013", "y": 0.8838333333333334 },
//   { "x": "2014", "y": 0.9475833333333333 },
//   { "x": "2015", "y": 0.9415833333333333 } ];

var latitudeDiv = document.querySelector('#lat');
var longitudeDiv = document.querySelector('#long');
var nameDiv = document.querySelector('#name');

latitudeDiv.innerHTML = mslData.metadata.latitude;
longitudeDiv.innerHTML = mslData.metadata.longitude;
nameDiv.innerHTML = mslData.metadata.name;

function max(data, cb) {
  return data.map(cb).reduce(function(prev, curr) {
    return curr > prev ? curr : prev;
  })
}

function min(data, cb) {
  return data.map(cb).reduce(function(prev, curr) {
    return curr < prev ? curr : prev;
  })
}

function getMousePos(div, evt) {
  return {
    x: evt.pageX - div.offsetLeft,
    y: evt.pageY - div.offsetTop
  }
}

var container = document.querySelector('#container')
var water = document.querySelector('#water');
var info = document.querySelector('#info');
var mslText = document.querySelector('#mslText');
var yearText = document.querySelector('#yearText');

container.addEventListener('mousemove', function(evt) {
  var mousePos = getMousePos(container, evt);

  var cellWidth = container.clientWidth / mslData.data.length;
  var cell = Math.floor(mousePos.x / cellWidth);

  var minimum = min(mslData.data, function(d) {
    return d.y
  });

  var maximum = max(mslData.data, function(d) {
    return d.y
  });

  var dataHeight = maximum - minimum;
  var cellHeight = (mslData.data[cell].y - minimum)/ dataHeight * container.clientHeight;
  water.style.height = cellHeight + 'px';
  info.style.height = (cellHeight + 142) + 'px';
  mslText.innerHTML = (parseFloat(mslData.data[cell].y) * 12).toFixed(2) + ' in.';
  yearText.innerHTML = mslData.data[cell].x;
});